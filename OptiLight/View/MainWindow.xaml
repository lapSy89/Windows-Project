<Window x:Class="OptiLight.View.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:View="clr-namespace:OptiLight.View"
        xmlns:ViewModel="clr-namespace:OptiLight.ViewModel"
        Title="Optilight" Height="700" Width="900"
        Icon="pack://application:,,,/Resources/lampicon.ico"
        DataContext="{Binding Source={StaticResource Locator}, Path=Main}"
        >
    
  <!--
       

    <Window.DataContext>
        <ViewModel:BaseViewModel x:Name="MVM"/>
    </Window.DataContext>
    -->
    
    <!-- Key bindings-->
    <Window.InputBindings>
        <KeyBinding Key="Delete"
              Command="{Binding RemoveLampCommand}" />
        <KeyBinding Key="Z"
              Modifiers="Control" 
              Command="{Binding UndoCommand}" />
        <KeyBinding Key="Y"
              Modifiers="Control" 
              Command="{Binding RedoCommand}" />
    </Window.InputBindings>
    
    <!-- Overall layout for the Window-->
    <DockPanel>
        <!-- Menu layout -->
        <Grid DockPanel.Dock="Top" Margin="5">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            <!-- Menu for "File" "Edit" -->

            <View:RibbonMenu Grid.Row="1"/>
        </Grid>
        <!-- Sidepanel and drawing window layout -->
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>

            </Grid.ColumnDefinitions>
   
            <!-- SidePanel layout (comes from SidePanel.xaml -->
            <View:SidePanel/>
         
            <!-- Drawing window -->
            <ScrollViewer HorizontalScrollBarVisibility="Visible" VerticalAlignment="Stretch" HorizontalAlignment="Stretch"
                          VerticalScrollBarVisibility="Visible" Grid.Column="1">
                <Grid Height="{Binding height}" Width="{Binding width}">

                    <Border BorderBrush="Black" 
                        BorderThickness="2"
                        HorizontalAlignment="Stretch"
                        VerticalAlignment="Stretch"
                        Background="LightGray"/>

                    <Rectangle Height="{Binding height}"  Width="{Binding width}" Stroke="Black" StrokeThickness="0">
                        <Rectangle.Fill>
                            <DrawingBrush Stretch="None" TileMode="Tile"
                            Viewport="0,0 50,50" ViewportUnits="Absolute">
                                <!-- ^^^^^^^^^^^ set the size of the tile-->
                                <DrawingBrush.Drawing>
                                    <GeometryDrawing>
                                        <GeometryDrawing.Geometry>
                                            <GeometryGroup>
                                                <!-- Draws two lines, to represent grid (X,Y Coordinates)
                                                     Change "50" to the Grid Size Variable, Emil-->
                                                <LineGeometry StartPoint="0,0" EndPoint="0,50" />
                                                <LineGeometry StartPoint="0,50" EndPoint="50,50" />
                                            </GeometryGroup>
                                        </GeometryDrawing.Geometry>
                                        <GeometryDrawing.Pen>
                                            <!-- set color and thickness of lines -->
                                            <Pen Thickness="0.4" Brush="{Binding gridVisibility}"/>
                                        </GeometryDrawing.Pen>
                                    </GeometryDrawing>
                                </DrawingBrush.Drawing>
                            </DrawingBrush>
                        </Rectangle.Fill>
                    </Rectangle>
                    <ItemsControl ItemsSource="{Binding Lamps}"/>
                </Grid>
            </ScrollViewer>
        </Grid>
    </DockPanel>
</Window>